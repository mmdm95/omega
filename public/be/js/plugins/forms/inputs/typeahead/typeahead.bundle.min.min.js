/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
;!function(d,c){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(a){return d.Bloodhound=c(a)}):"object"==typeof exports?module.exports=c(require("jquery")):d.Bloodhound=c(jQuery)}(this,function(x){var w=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(b){return !b||/^\s*$/.test(b)},escapeRegExChars:function(b){return b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(b){return"string"==typeof b},isNumber:function(b){return"number"==typeof b},isArray:x.isArray,isFunction:x.isFunction,isObject:x.isPlainObject,isUndefined:function(b){return"undefined"==typeof b},isElement:function(b){return !(!b||1!==b.nodeType)},isJQuery:function(a){return a instanceof x},toStr:function(b){return w.isUndefined(b)||null===b?"":b+""},bind:x.proxy,each:function(a,f){function e(d,c){return f(c,d)}x.each(a,e)},map:x.map,filter:x.grep,every:function(a,f){var e=!0;return a?(x.each(a,function(b,c){return(e=f.call(null,c,b,a))?void 0:!1}),!!e):e},some:function(a,f){var e=!1;return a?(x.each(a,function(b,c){return(e=f.call(null,c,b,a))?!1:void 0}),!!e):e},mixin:x.extend,identity:function(b){return b},clone:function(a){return x.extend(!0,{},a)},getIdGenerator:function(){var b=0;return function(){return b++}},templatify:function(a){function d(){return String(a)}return x.isFunction(a)?a:d},defer:function(b){setTimeout(b,0)},debounce:function(g,f,j){var i,h;return function(){var d,c,b=this,a=arguments;return d=function(){i=null,j||(h=g.apply(b,a))},c=j&&!i,clearTimeout(i),i=setTimeout(d,f),c&&(h=g.apply(b,a)),h}},throttle:function(j,i){var B,A,z,y,l,k;return l=0,k=function(){l=new Date,z=null,y=j.apply(B,A)},function(){var b=new Date,a=i-(b-l);return B=this,A=arguments,0>=a?(clearTimeout(z),z=null,l=b,y=j.apply(B,A)):z||(z=setTimeout(k,a)),y}},stringify:function(b){return w.isString(b)?b:JSON.stringify(b)},noop:function(){}}}(),v="0.11.1",u=function(){function b(c){return c=w.toStr(c),c?c.split(/\s+/):[]}function f(c){return c=w.toStr(c),c?c.split(/\W+/):[]}function e(c){return function(a){return a=w.isArray(a)?a:[].slice.call(arguments,0),function(h){var g=[];return w.each(a,function(d){g=g.concat(c(w.toStr(h[d])))}),g}}}return{nonword:f,whitespace:b,obj:{nonword:e(f),whitespace:e(b)}}}(),t=function(){function f(d){this.maxSize=w.isNumber(d)?d:100,this.reset(),this.maxSize<=0&&(this.set=this.get=x.noop)}function b(){this.head=this.tail=null}function a(d,c){this.key=d,this.val=c,this.prev=this.next=null}return w.mixin(f.prototype,{set:function(g,e){var i,h=this.list.tail;this.size>=this.maxSize&&(this.list.remove(h),delete this.hash[h.key],this.size--),(i=this.hash[g])?(i.val=e,this.list.moveToFront(i)):(i=new a(g,e),this.list.add(i),this.hash[g]=i,this.size++)},get:function(d){var c=this.hash[d];return c?(this.list.moveToFront(c),c.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new b}}),w.mixin(b.prototype,{add:function(c){this.head&&(c.next=this.head,this.head.prev=c),this.head=c,this.tail=this.tail||c},remove:function(c){c.prev?c.prev.next=c.next:this.head=c.next,c.next?c.next.prev=c.prev:this.tail=c.prev},moveToFront:function(c){this.remove(c),this.add(c)}}),f}(),s=function(){function z(d,e){this.prefix=["__",d,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+w.escapeRegExChars(this.prefix)),this.ls=e||b,!this.ls&&this._noop()}function y(){return(new Date).getTime()}function l(c){return JSON.stringify(w.isUndefined(c)?null:c)}function k(c){return x.parseJSON(c)}function j(g){var f,A,i=[],h=b.length;for(f=0;h>f;f++){(A=b.key(f)).match(g)&&i.push(A.replace(g,""))}return i}var b;try{b=window.localStorage,b.setItem("~~~","!"),b.removeItem("~~~")}catch(a){b=null}return w.mixin(z.prototype,{_prefix:function(c){return this.prefix+c},_ttlKey:function(c){return this._prefix(c)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=w.noop},_safeSet:function(e,d){try{this.ls.setItem(e,d)}catch(f){"QuotaExceededError"===f.name&&(this.clear(),this._noop())}},get:function(c){return this.isExpired(c)&&this.remove(c),k(this.ls.getItem(this._prefix(c)))},set:function(d,g,e){return w.isNumber(e)?this._safeSet(this._ttlKey(d),l(y()+e)):this.ls.removeItem(this._ttlKey(d)),this._safeSet(this._prefix(d),l(g))},remove:function(c){return this.ls.removeItem(this._ttlKey(c)),this.ls.removeItem(this._prefix(c)),this},clear:function(){var d,c=j(this.keyMatcher);for(d=c.length;d--;){this.remove(c[d])}return this},isExpired:function(d){var e=k(this.ls.getItem(this._ttlKey(d)));return w.isNumber(e)&&y()>e?!0:!1}}),z}(),r=function(){function j(c){c=c||{},this.cancelled=!1,this.lastReq=null,this._send=c.transport,this._get=c.limiter?c.limiter(this._get):this._get,this._cache=c.cache===!1?new t(0):a}var i=0,e={},b=6,a=new t(10);return j.setMaxPendingRequests=function(c){b=c},j.resetCache=function(){a.reset()},w.mixin(j.prototype,{_fingerprint:function(c){return c=c||{},c.url+c.type+x.param(c.data||{})},_get:function(f,d){function B(c){d(null,c),g._cache.set(y,c)}function A(){d(!0)}function z(){i--,delete e[y],g.onDeckRequestArgs&&(g._get.apply(g,g.onDeckRequestArgs),g.onDeckRequestArgs=null)}var y,l,g=this;y=this._fingerprint(f),this.cancelled||y!==this.lastReq||((l=e[y])?l.done(B).fail(A):b>i?(i++,e[y]=this._send(f).done(B).fail(A).always(z)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(l,k){var h,g;k=k||x.noop,l=w.isString(l)?{url:l}:l||{},g=this._fingerprint(l),this.cancelled=!1,this.lastReq=g,(h=this._cache.get(g))?k(null,h):this._get(l,k)},cancel:function(){this.cancelled=!0}}),j}(),q=window.SearchIndex=function(){function z(d){d=d||{},d.datumTokenizer&&d.queryTokenizer||x.error("datumTokenizer and queryTokenizer are both required"),this.identify=d.identify||w.stringify,this.datumTokenizer=d.datumTokenizer,this.queryTokenizer=d.queryTokenizer,this.reset()}function y(c){return c=w.filter(c,function(d){return !!d}),c=w.map(c,function(d){return d.toLowerCase()})}function l(){var c={};return c[a]=[],c[b]={},c}function k(g){for(var f={},A=[],i=0,h=g.length;h>i;i++){f[g[i]]||(f[g[i]]=!0,A.push(g[i]))}return A}function j(i,h){var E=0,D=0,C=[];i=i.sort(),h=h.sort();for(var B=i.length,A=h.length;B>E&&A>D;){i[E]<h[D]?E++:i[E]>h[D]?D++:(C.push(i[E]),E++,D++)}return C}var b="c",a="i";return w.mixin(z.prototype,{bootstrap:function(c){this.datums=c.datums,this.trie=c.trie},add:function(d){var e=this;d=w.isArray(d)?d:[d],w.each(d,function(c){var i,h;e.datums[i=e.identify(c)]=c,h=y(e.datumTokenizer(c)),w.each(h,function(A){var f,C,B;for(f=e.trie,C=A.split("");B=C.shift();){f=f[b][B]||(f[b][B]=l()),f[a].push(i)}})})},get:function(d){var e=this;return w.map(d,function(c){return e.datums[c]})},search:function(d){var h,g,f=this;return h=y(this.queryTokenizer(d)),w.each(h,function(i){var e,C,B,A;if(g&&0===g.length){return !1}for(e=f.trie,C=i.split("");e&&(B=C.shift());){e=e[b][B]}return e&&0===C.length?(A=e[a].slice(0),void (g=g?j(g,A):A)):(g=[],!1)}),g?w.map(k(g),function(c){return f.datums[c]}):[]},all:function(){var d=[];for(var c in this.datums){d.push(this.datums[c])}return d},reset:function(){this.datums={},this.trie=l()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),z}(),p=function(){function b(c){this.url=c.url,this.ttl=c.ttl,this.cache=c.cache,this.prepare=c.prepare,this.transform=c.transform,this.transport=c.transport,this.thumbprint=c.thumbprint,this.storage=new s(c.cacheKey)}var d;return d={data:"data",protocol:"protocol",thumbprint:"thumbprint"},w.mixin(b.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(c){this.cache&&(this.storage.set(d.data,c,this.ttl),this.storage.set(d.protocol,location.protocol,this.ttl),this.storage.set(d.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var e,c={};return this.cache?(c.data=this.storage.get(d.data),c.protocol=this.storage.get(d.protocol),c.thumbprint=this.storage.get(d.thumbprint),e=c.thumbprint!==this.thumbprint||c.protocol!==location.protocol,c.data&&!e?c.data:null):null},fromNetwork:function(g){function f(){g(!0)}function j(a){g(null,h.transform(a))}var i,h=this;g&&(i=this.prepare(this._settings()),this.transport(i).fail(f).done(j))},clear:function(){return this.storage.clear(),this}}),b}(),o=function(){function b(c){this.url=c.url,this.prepare=c.prepare,this.transform=c.transform,this.transport=new r({cache:c.cache,limiter:c.limiter,transport:c.transport})}return w.mixin(b.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(g,f){function j(d,e){f(d?[]:h.transform(e))}var i,h=this;if(f){return g=g||"",i=this.prepare(g,this._settings()),this.transport.get(i,j)}},cancelLastRequest:function(){this.transport.cancel()}}),b}(),n=function(){function j(g){var f;return g?(f={url:null,ttl:86400000,cache:!0,cacheKey:null,thumbprint:"",prepare:w.identity,transform:w.identity,transport:null},g=w.isString(g)?{url:g}:g,g=w.mixin(f,g),!g.url&&x.error("prefetch requires url to be set"),g.transform=g.filter||g.transform,g.cacheKey=g.cacheKey||g.url,g.thumbprint=v+g.thumbprint,g.transport=g.transport?a(g.transport):x.ajax,g):null}function i(f){var e;if(f){return e={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:w.identity,transport:null},f=w.isString(f)?{url:f}:f,f=w.mixin(e,f),!f.url&&x.error("remote requires url to be set"),f.transform=f.filter||f.transform,f.prepare=c(f),f.limiter=b(f),f.transport=f.transport?a(f.transport):x.ajax,delete f.replace,delete f.wildcard,delete f.rateLimitBy,delete f.rateLimitWait,f}}function c(k){function h(e,d){return d.url=y(d.url,e),d}function B(e,d){return d.url=d.url.replace(l,encodeURIComponent(e)),d}function A(e,d){return d}var z,y,l;return z=k.prepare,y=k.replace,l=k.wildcard,z?z:z=y?h:k.wildcard?B:A}function b(h){function A(d){return function(e){return w.debounce(e,d)}}function z(d){return function(e){return w.throttle(e,d)}}var y,l,k;return y=h.limiter,l=h.rateLimitBy,k=h.rateLimitWait,y||(y=/^throttle$/i.test(l)?z(k):A(k)),y}function a(d){return function(y){function l(e){w.defer(function(){h.resolve(e)})}function k(e){w.defer(function(){h.reject(e)})}var h=x.Deferred();return d(y,l,k),h}}return function(h){var e,d;return e={initialize:!0,identify:w.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},h=w.mixin(e,h||{}),!h.datumTokenizer&&x.error("datumTokenizer is required"),!h.queryTokenizer&&x.error("queryTokenizer is required"),d=h.sorter,h.sorter=d?function(f){return f.sort(d)}:w.identity,h.local=w.isFunction(h.local)?h.local():h.local,h.prefetch=j(h.prefetch),h.remote=i(h.remote),h}}(),m=function(){function b(c){c=n(c),this.sorter=c.sorter,this.identify=c.identify,this.sufficient=c.sufficient,this.local=c.local,this.remote=c.remote?new o(c.remote):null,this.prefetch=c.prefetch?new p(c.prefetch):null,this.index=new q({identify:this.identify,datumTokenizer:c.datumTokenizer,queryTokenizer:c.queryTokenizer}),c.initialize!==!1&&this.initialize()}var a;return a=window&&window.Bloodhound,b.noConflict=function(){return window&&(window.Bloodhound=a),b},b.tokenizers=u,w.mixin(b.prototype,{__ttAdapter:function(){function e(g,c,h){return f.search(g,c,h)}function d(g,c){return f.search(g,c)}var f=this;return this.remote?e:d},_loadPrefetch:function(){function f(d,c){return d?i.reject():(g.add(c),g.prefetch.store(g.index.serialize()),void i.resolve())}var i,h,g=this;return i=x.Deferred(),this.prefetch?(h=this.prefetch.fromCache())?(this.index.bootstrap(h),i.resolve()):this.prefetch.fromNetwork(f):i.resolve(),i.promise()},_initialize:function(){function d(){c.add(c.local)}var c=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(d),this.initPromise},initialize:function(c){return !this.initPromise||c?this._initialize():this.initPromise},add:function(c){return this.index.add(c),this},get:function(c){return c=w.isArray(c)?c:[].slice.call(arguments),this.index.get(c)},search:function(h,y,l){function k(d){var e=[];w.each(d,function(c){!w.some(j,function(f){return i.identify(c)===i.identify(f)})&&e.push(c)}),l&&l(e)}var j,i=this;return j=this.sorter(this.index.search(h)),y(this.remote?j.slice():j),this.remote&&j.length<this.sufficient?this.remote.get(h,k):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return r.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),b}();return m}),function(d,c){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(b){return c(b)}):"object"==typeof exports?module.exports=c(require("jquery")):c(jQuery)}(this,function(v){var u=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(b){return !b||/^\s*$/.test(b)},escapeRegExChars:function(b){return b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(b){return"string"==typeof b},isNumber:function(b){return"number"==typeof b},isArray:v.isArray,isFunction:v.isFunction,isObject:v.isPlainObject,isUndefined:function(b){return"undefined"==typeof b},isElement:function(b){return !(!b||1!==b.nodeType)},isJQuery:function(a){return a instanceof v},toStr:function(b){return u.isUndefined(b)||null===b?"":b+""},bind:v.proxy,each:function(a,f){function e(d,c){return f(c,d)}v.each(a,e)},map:v.map,filter:v.grep,every:function(a,f){var e=!0;return a?(v.each(a,function(b,c){return(e=f.call(null,c,b,a))?void 0:!1}),!!e):e},some:function(a,f){var e=!1;return a?(v.each(a,function(b,c){return(e=f.call(null,c,b,a))?!1:void 0}),!!e):e},mixin:v.extend,identity:function(b){return b},clone:function(a){return v.extend(!0,{},a)},getIdGenerator:function(){var b=0;return function(){return b++}},templatify:function(a){function d(){return String(a)}return v.isFunction(a)?a:d},defer:function(b){setTimeout(b,0)},debounce:function(g,f,j){var i,h;return function(){var d,c,b=this,a=arguments;return d=function(){i=null,j||(h=g.apply(b,a))},c=j&&!i,clearTimeout(i),i=setTimeout(d,f),c&&(h=g.apply(b,a)),h}},throttle:function(j,i){var A,z,y,x,w,k;return w=0,k=function(){w=new Date,y=null,x=j.apply(A,z)},function(){var b=new Date,a=i-(b-w);return A=this,z=arguments,0>=a?(clearTimeout(y),y=null,w=b,x=j.apply(A,z)):y||(y=setTimeout(k,a)),x}},stringify:function(b){return u.isString(b)?b:JSON.stringify(b)},noop:function(){}}}(),t=function(){function b(c){var e,d;return d=u.mixin({},g,c),e={css:h(),classes:d,html:j(d),selectors:i(d)},{css:e.css,html:e.html,classes:e.classes,selectors:e.selectors,mixin:function(f){u.mixin(f,e)}}}function j(c){return{wrapper:'<span class="'+c.wrapper+'"></span>',menu:'<div class="'+c.menu+'"></div>'}}function i(d){var e={};return u.each(d,function(f,c){e[c]="."+f}),e}function h(){var c={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return u.isMsie()&&u.mixin(c.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),c}var g={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return b}(),s=function(){function f(c){c&&c.el||v.error("EventBus initialized without el"),this.$el=v(c.el)}var b,a;return b="typeahead:",a={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},u.mixin(f.prototype,{_trigger:function(d,h){var g;return g=v.Event(b+d),(h=h||[]).unshift(g),this.$el.trigger.apply(this.$el,h),g},before:function(e){var d,g;return d=[].slice.call(arguments,1),g=this._trigger("before"+e,d),g.isDefaultPrevented()},trigger:function(d){var c;this._trigger(d,[].slice.call(arguments,1)),(c=a[d])&&this._trigger(c,[].slice.call(arguments,1))}}),f}(),r=function(){function E(g,f,j,i){var h;if(!j){return this}for(f=f.split(w),j=i?x(j,i):j,this._callbacks=this._callbacks||{};h=f.shift();){this._callbacks[h]=this._callbacks[h]||{sync:[],async:[]},this._callbacks[h][g].push(j)}return this}function D(a,f,e){return E.call(this,"async",a,f,e)}function C(a,f,e){return E.call(this,"sync",a,f,e)}function B(d){var c;if(!this._callbacks){return this}for(d=d.split(w);c=d.shift();){delete this._callbacks[c]}return this}function A(h){var f,G,F,j,i;if(!this._callbacks){return this}for(h=h.split(w),F=[].slice.call(arguments,1);(f=h.shift())&&(G=this._callbacks[f]);){j=z(G.sync,this,[f].concat(F)),i=z(G.async,this,[f].concat(F)),j()&&k(i)}return this}function z(f,e,h){function g(){for(var c,b=0,a=f.length;!c&&a>b;b+=1){c=f[b].apply(e,h)===!1}return !c}return g}function y(){var b;return b=window.setImmediate?function(c){setImmediate(function(){c()})}:function(c){setTimeout(function(){c()},0)}}function x(d,c){return d.bind?d.bind(c):function(){d.apply(c,[].slice.call(arguments,0))}}var w=/\s+/,k=y();return{onSync:C,onAsync:D,off:B,trigger:A}}(),q=function(b){function f(i,z,y){for(var x,w=[],k=0,j=i.length;j>k;k++){w.push(u.escapeRegExChars(i[k]))}return x=y?"\\b("+w.join("|")+")\\b":"("+w.join("|")+")",z?new RegExp(x):new RegExp(x,"i")}var e={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(i){function d(g){var k,j,h;return(k=a.exec(g.data))&&(h=b.createElement(i.tagName),i.className&&(h.className=i.className),j=g.splitText(k.index),j.splitText(k[0].length),h.appendChild(j.cloneNode(!0)),g.parentNode.replaceChild(h,j)),!!k}function c(h,g){for(var w,k=3,j=0;j<h.childNodes.length;j++){w=h.childNodes[j],w.nodeType===k?j+=g(w)?1:0:c(w,g)}}var a;i=u.mixin({},e,i),i.node&&i.pattern&&(i.pattern=u.isArray(i.pattern)?i.pattern:[i.pattern],a=f(i.pattern,i.caseSensitive,i.wordsOnly),c(i.node,d))}}(window.document),p=function(){function j(f,d){f=f||{},f.input||v.error("input is missing"),d.mixin(this),this.$hint=v(f.hint),this.$input=v(f.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=i(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=u.noop)}function i(c){return v('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:c.css("font-family"),fontSize:c.css("font-size"),fontStyle:c.css("font-style"),fontVariant:c.css("font-variant"),fontWeight:c.css("font-weight"),wordSpacing:c.css("word-spacing"),letterSpacing:c.css("letter-spacing"),textIndent:c.css("text-indent"),textRendering:c.css("text-rendering"),textTransform:c.css("text-transform")}).insertAfter(c)}function e(d,c){return j.normalizeQuery(d)===j.normalizeQuery(c)}function b(c){return c.altKey||c.ctrlKey||c.metaKey||c.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},j.normalizeQuery=function(c){return u.toStr(c).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},u.mixin(j.prototype,r,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(d){var c=a[d.which||d.keyCode];this._managePreventDefault(c,d),c&&this._shouldTrigger(c,d)&&this.trigger(c+"Keyed",d)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(f,d){var g;switch(f){case"up":case"down":g=!b(d);break;default:g=!1}g&&d.preventDefault()},_shouldTrigger:function(f,d){var g;switch(f){case"tab":g=!b(d);break;default:g=!0}return g},_checkLanguageDirection:function(){var c=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==c&&(this.dir=c,this.$hint.attr("dir",c),this.trigger("langDirChanged",c))},_setQuery:function(g,f){var k,h;k=e(g,this.query),h=k?this.query.length!==g.length:!1,this.query=g,f||k?!f&&h&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var g,x,w,k,h=this;return g=u.bind(this._onBlur,this),x=u.bind(this._onFocus,this),w=u.bind(this._onKeydown,this),k=u.bind(this._onInput,this),this.$input.on("blur.tt",g).on("focus.tt",x).on("keydown.tt",w),!u.isMsie()||u.isMsie()>9?this.$input.on("input.tt",k):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(c){a[c.which||c.keyCode]||u.defer(u.bind(h._onInput,h,c))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(d,c){this.setInputValue(d),this._setQuery(d,c)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(c){this.$input.val(c),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(c){this.$hint.val(c)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var g,f,k,h;g=this.getInputValue(),f=this.getHint(),k=g!==f&&0===f.indexOf(g),h=""!==g&&k&&!this.hasOverflow(),!h&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var c=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=c},isCursorAtEnd:function(){var f,h,g;return f=this.$input.val().length,h=this.$input[0].selectionStart,u.isNumber(h)?h===f:document.selection?(g=document.selection.createRange(),g.moveStart("character",-f),f===g.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=v("<div>")}}),j}(),o=function(){function w(g,d){g=g||{},g.templates=g.templates||{},g.templates.notFound=g.templates.notFound||g.templates.empty,g.source||v.error("missing source"),g.node||v.error("missing node"),g.name&&!e(g.name)&&v.error("invalid dataset name: "+g.name),d.mixin(this),this.highlight=!!g.highlight,this.name=g.name||a(),this.limit=g.limit||5,this.displayFn=k(g.display||g.displayKey),this.templates=f(g.templates,this.displayFn),this.source=g.source.__ttAdapter?g.source.__ttAdapter():g.source,this.async=u.isUndefined(g.async)?this.source.length>2:!!g.async,this._resetLastSuggestion(),this.$el=v(g.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function k(d){function g(c){return c[d]}return d=d||u.stringify,u.isFunction(d)?d:g}function f(i,h){function g(c){return v("<div>").text(h(c))}return{notFound:i.notFound&&u.templatify(i.notFound),pending:i.pending&&u.templatify(i.pending),header:i.home&&u.templatify(i.home),footer:i.home&&u.templatify(i.home),suggestion:i.suggestion||g}}function e(c){return/^[_a-zA-Z0-9-]+$/.test(c)}var b,a;return b={val:"tt-selectable-display",obj:"tt-selectable-object"},a=u.getIdGenerator(),w.extractData=function(d){var g=v(d);return g.data(b.obj)?{val:g.data(b.val)||"",obj:g.data(b.obj)||null}:null},u.mixin(w.prototype,r,{_overwrite:function(d,c){c=c||[],c.length?this._renderSuggestions(d,c):this.async&&this.templates.pending?this._renderPending(d):!this.async&&this.templates.notFound?this._renderNotFound(d):this._empty(),this.trigger("rendered",this.name,c,!1)},_append:function(d,c){c=c||[],c.length&&this.$lastSuggestion.length?this._appendSuggestions(d,c):c.length?this._renderSuggestions(d,c):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(d),this.trigger("rendered",this.name,c,!0)},_renderSuggestions:function(g,d){var h;h=this._getSuggestionsFragment(g,d),this.$lastSuggestion=h.children().last(),this.$el.html(h).prepend(this._getHeader(g,d)).append(this._getFooter(g,d))},_appendSuggestions:function(h,g){var j,i;j=this._getSuggestionsFragment(h,g),i=j.children().last(),this.$lastSuggestion.after(j),this.$lastSuggestion=i},_renderPending:function(d){var c=this.templates.pending;this._resetLastSuggestion(),c&&this.$el.html(c({query:d,dataset:this.name}))},_renderNotFound:function(d){var c=this.templates.notFound;this._resetLastSuggestion(),c&&this.$el.html(c({query:d,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(x,j){var i,h=this;return i=document.createDocumentFragment(),u.each(j,function(c){var y,g;g=h._injectQuery(x,c),y=v(h.templates.suggestion(g)).data(b.obj,c).data(b.val,h.displayFn(c)).addClass(h.classes.suggestion+" "+h.classes.selectable),i.appendChild(y[0])}),this.highlight&&q({className:this.classes.highlight,node:i,pattern:x}),v(i)},_getFooter:function(d,c){return this.templates.home?this.templates.home({query:d,suggestions:c,dataset:this.name}):null},_getHeader:function(d,c){return this.templates.home?this.templates.home({query:d,suggestions:c,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=v()},_injectQuery:function(d,g){return u.isObject(g)?u.mixin({_query:d},g):g},update:function(i){function B(c){x||(x=!0,c=(c||[]).slice(0,z.limit),j=c.length,z._overwrite(i,c),j<z.limit&&z.async&&z.trigger("asyncRequested",i))}function A(d){d=d||[],!y&&j<z.limit&&(z.cancel=v.noop,j+=d.length,z._append(i,d.slice(0,z.limit-j)),z.async&&z.trigger("asyncReceived",i))}var z=this,y=!1,x=!1,j=0;this.cancel(),this.cancel=function(){y=!0,z.cancel=v.noop,z.async&&z.trigger("asyncCanceled",i)},this.source(i,B,A),!x&&B([])},cancel:v.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=v("<div>")}}),w}(),n=function(){function a(i,h){function g(d){var e=b.$node.find(d.node).first();return d.node=e.length?e:v("<div>").appendTo(b.$node),new o(d,h)}var b=this;i=i||{},i.node||v.error("node is required"),h.mixin(this),this.$node=v(i.node),this.query=null,this.datasets=u.map(i.datasets,g)}return u.mixin(a.prototype,r,{_onSelectableClick:function(c){this.trigger("selectableClicked",v(c.currentTarget))},_onRendered:function(f,e,h,g){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,h,g)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function b(c){return c.isEmpty()}return u.every(this.datasets,b)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var b=this.getActiveSelectable();b&&b.removeClass(this.classes.cursor)},_ensureVisible:function(g){var f,j,i,h;f=g.position().top,j=f+g.outerHeight(!0),i=this.$node.scrollTop(),h=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>f?this.$node.scrollTop(i+f):j>h&&this.$node.scrollTop(i+(j-h))},bind:function(){var b,d=this;return b=u.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,b),u.each(this.datasets,function(c){c.onSync("asyncRequested",d._propagate,d).onSync("asyncCanceled",d._propagate,d).onSync("asyncReceived",d._propagate,d).onSync("rendered",d._onRendered,d).onSync("cleared",d._onCleared,d)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(b){this.$node.attr("dir",b)},selectableRelativeToCursor:function(g){var f,j,i,h;return j=this.getActiveSelectable(),f=this._getSelectables(),i=j?f.index(j):-1,h=i+g,h=(h+1)%(f.length+1)-1,h=-1>h?f.length-1:h,-1===h?null:f.eq(h)},setCursor:function(b){this._removeCursor(),(b=b&&b.first())&&(b.addClass(this.classes.cursor),this._ensureVisible(b))},getSelectableData:function(b){return b&&b.length?o.extractData(b):null},getActiveSelectable:function(){var b=this._getSelectables().filter(this.selectors.cursor).first();return b.length?b:null},getTopSelectable:function(){var b=this._getSelectables().first();return b.length?b:null},update:function(b){function f(c){c.update(b)}var e=b!==this.query;return e&&(this.query=b,u.each(this.datasets,f)),e},empty:function(){function b(c){c.clear()}u.each(this.datasets,b),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function b(c){c.destroy()}this.$node.off(".tt"),this.$node=v("<div>"),u.each(this.datasets,b)}}),a}(),m=function(){function b(){n.apply(this,[].slice.call(arguments,0))}var d=n.prototype;return u.mixin(b.prototype,n.prototype,{open:function(){return !this._allDatasetsEmpty()&&this._show(),d.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),d.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),d._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),d._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(c){return this.$node.css("ltr"===c?this.css.ltr:this.css.rtl),d.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),b}(),l=function(){function b(H,G){var F,E,D,C,B,A,z,y,x,w,d;H=H||{},H.input||v.error("missing input"),H.menu||v.error("missing menu"),H.eventBus||v.error("missing event bus"),G.mixin(this),this.eventBus=H.eventBus,this.minLength=u.isNumber(H.minLength)?H.minLength:1,this.input=H.input,this.menu=H.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),F=a(this,"activate","open","_onFocused"),E=a(this,"deactivate","_onBlurred"),D=a(this,"isActive","isOpen","_onEnterKeyed"),C=a(this,"isActive","isOpen","_onTabKeyed"),B=a(this,"isActive","_onEscKeyed"),A=a(this,"isActive","open","_onUpKeyed"),z=a(this,"isActive","open","_onDownKeyed"),y=a(this,"isActive","isOpen","_onLeftKeyed"),x=a(this,"isActive","isOpen","_onRightKeyed"),w=a(this,"_openIfActive","_onQueryChanged"),d=a(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",F,this).onSync("blurred",E,this).onSync("enterKeyed",D,this).onSync("tabKeyed",C,this).onSync("escKeyed",B,this).onSync("upKeyed",A,this).onSync("downKeyed",z,this).onSync("leftKeyed",y,this).onSync("rightKeyed",x,this).onSync("queryChanged",w,this).onSync("whitespaceChanged",d,this).onSync("langDirChanged",this._onLangDirChanged,this)}function a(d){var e=[].slice.call(arguments,1);return function(){var c=[].slice.call(arguments);u.each(e,function(f){return d[f].apply(d,c)})}}return u.mixin(b.prototype,{_hacks:function(){var f,e;f=this.input.$input||v("<div>"),e=this.menu.$node||v("<div>"),f.on("blur.tt",function(c){var i,h,d;i=document.activeElement,h=e.is(i),d=e.has(i).length>0,u.isMsie()&&(h||d)&&(c.preventDefault(),c.stopImmediatePropagation(),u.defer(function(){f.focus()}))}),e.on("mousedown.tt",function(c){c.preventDefault()})},_onSelectableClicked:function(d,c){this.select(c)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(f,e,h,g){this._updateHint(),this.eventBus.trigger("render",h,g,e)},_onAsyncRequested:function(e,d,f){this.eventBus.trigger("asyncrequest",f,d)},_onAsyncCanceled:function(e,d,f){this.eventBus.trigger("asynccancel",f,d)},_onAsyncReceived:function(e,d,f){this.eventBus.trigger("asyncreceive",f,d)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(e,d){var f;(f=this.menu.getActiveSelectable())&&this.select(f)&&d.preventDefault()},_onTabKeyed:function(e,d){var f;(f=this.menu.getActiveSelectable())?this.select(f)&&d.preventDefault():(f=this.menu.getTopSelectable())&&this.autocomplete(f)&&d.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(d,c){this._minLengthMet(c)?this.menu.update(c):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(d,c){this.dir!==c&&(this.dir=c,this.menu.setLanguageDirection(c))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(c){return c=u.isString(c)?c:this.input.getQuery()||"",c.length>=this.minLength},_updateHint:function(){var g,z,y,x,w,k,j;g=this.menu.getTopSelectable(),z=this.menu.getSelectableData(g),y=this.input.getInputValue(),!z||u.isBlankString(y)||this.input.hasOverflow()?this.input.clearHint():(x=p.normalizeQuery(y),w=u.escapeRegExChars(x),k=new RegExp("^(?:"+w+")(.+$)","i"),j=k.exec(z.val),j&&this.input.setHint(y+j[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(c){this.input.setQuery(u.toStr(c))},getVal:function(){return this.input.getQuery()},select:function(d){var c=this.menu.getSelectableData(d);return c&&!this.eventBus.before("select",c.obj)?(this.input.setQuery(c.val,!0),this.eventBus.trigger("select",c.obj),this.close(),!0):!1},autocomplete:function(f){var e,h,g;return e=this.input.getQuery(),h=this.menu.getSelectableData(f),g=h&&e!==h.val,g&&!this.eventBus.before("autocomplete",h.obj)?(this.input.setQuery(h.val),this.eventBus.trigger("autocomplete",h.obj),!0):!1},moveCursor:function(h){var g,w,k,j,i;return g=this.input.getQuery(),w=this.menu.selectableRelativeToCursor(h),k=this.menu.getSelectableData(w),j=k?k.obj:null,i=this._minLengthMet()&&this.menu.update(g),i||this.eventBus.before("cursorchange",j)?!1:(this.menu.setCursor(w),k?this.input.setInputValue(k.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",j),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),b}();!function(){function w(e,f){e.each(function(){var h,x=v(this);(h=x.data(b.typeahead))&&f(h,x)})}function k(f,e){return f.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(i(f)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function j(f,e){f.data(b.attrs,{dir:f.attr("dir"),autocomplete:f.attr("autocomplete"),spellcheck:f.attr("spellcheck"),style:f.attr("style")}),f.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!f.attr("dir")&&f.attr("dir","auto")}catch(h){}return f}function i(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function g(e){var h,f;h=e.data(b.www),f=e.parent().filter(h.selectors.wrapper),u.each(e.data(b.attrs),function(y,x){u.isUndefined(y)?e.removeAttr(x):e.attr(x,y)}),e.removeData(b.typeahead).removeData(b.www).removeData(b.attr).removeClass(h.classes.input),f.length&&(e.detach().insertAfter(f),f.remove())}function d(x){var h,f;return h=u.isJQuery(x)||u.isElement(x),f=h?v(x).first():[],f.length?f:null}var c,b,a;c=v.fn.typeahead,b={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},a={initialize:function(x,h){function f(){var B,A,z,e,I,H,G,F,E,D,C;u.each(h,function(J){J.highlight=!!x.highlight}),B=v(this),A=v(y.html.wrapper),z=d(x.hint),e=d(x.menu),I=x.hint!==!1&&!z,H=x.menu!==!1&&!e,I&&(z=k(B,y)),H&&(e=v(y.html.menu).css(y.css.menu)),z&&z.val(""),B=j(B,y),(I||H)&&(A.css(y.css.wrapper),B.css(I?y.css.input:y.css.inputWithNoHint),B.wrap(A).parent().prepend(I?z:null).append(H?e:null)),C=H?m:n,G=new s({el:B}),F=new p({hint:z,input:B},y),E=new C({node:e,datasets:h},y),D=new l({input:F,menu:E,eventBus:G,minLength:x.minLength},y),B.data(b.www,y),B.data(b.typeahead,D)}var y;return h=u.isArray(h)?h:[].slice.call(arguments,1),x=x||{},y=t(x.classNames),this.each(f)},isEnabled:function(){var e;return w(this.first(),function(f){e=f.isEnabled()}),e},enable:function(){return w(this,function(e){e.enable()}),this},disable:function(){return w(this,function(e){e.disable()}),this},isActive:function(){var e;return w(this.first(),function(f){e=f.isActive()}),e},activate:function(){return w(this,function(e){e.activate()}),this},deactivate:function(){return w(this,function(e){e.deactivate()}),this},isOpen:function(){var e;return w(this.first(),function(f){e=f.isOpen()}),e},open:function(){return w(this,function(e){e.open()}),this},close:function(){return w(this,function(e){e.close()}),this},select:function(e){var h=!1,f=v(e);return w(this.first(),function(x){h=x.select(f)}),h},autocomplete:function(e){var h=!1,f=v(e);return w(this.first(),function(x){h=x.autocomplete(f)}),h},moveCursor:function(f){var e=!1;return w(this.first(),function(h){e=h.moveCursor(f)}),e},val:function(f){var e;return arguments.length?(w(this,function(h){h.setVal(f)}),this):(w(this.first(),function(h){e=h.getVal()}),e)},destroy:function(){return w(this,function(f,e){g(e),f.destroy()}),this}},v.fn.typeahead=function(e){return a[e]?a[e].apply(this,[].slice.call(arguments,1)):a.initialize.apply(this,arguments)},v.fn.typeahead.noConflict=function(){return v.fn.typeahead=c,this}}()});