!function(b){b.jGrowl=function(a,d){0===b("#jGrowl").size()&&b('<div id="jGrowl"></div>').addClass(d&&d.position?d.position:b.jGrowl.defaults.position).appendTo("body"),b("#jGrowl").jGrowl(a,d)},b.fn.jGrowl=function(a,f){if(void 0===f&&b.isPlainObject(a)&&(f=a,a=f.message),b.isFunction(this.each)){var e=arguments;return this.each(function(){void 0===b(this).data("jGrowl.instance")&&(b(this).data("jGrowl.instance",b.extend(new b.fn.jGrowl,{notifications:[],element:null,interval:null})),b(this).data("jGrowl.instance").startup(this)),b.isFunction(b(this).data("jGrowl.instance")[a])?b(this).data("jGrowl.instance")[a].apply(b(this).data("jGrowl.instance"),b.makeArray(e).slice(1)):b(this).data("jGrowl.instance").create(a,f)})}},b.extend(b.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3000,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},click:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(a,f){var e=b.extend({},this.defaults,f);"undefined"!=typeof e.speed&&(e.openDuration=e.speed,e.closeDuration=e.speed),this.notifications.push({message:a,options:e}),e.log.apply(this.element,[this.element,a,e])},render:function(a){var j=this,i=a.message,h=a.options;h.themeState=""===h.themeState?"":"ui-state-"+h.themeState;var g=b("<div/>").addClass("jGrowl-notification alert "+h.themeState+" ui-corner-all"+(void 0!==h.group&&""!==h.group?" "+h.group:"")).append(b("<button/>").addClass("jGrowl-close").html(h.closeTemplate)).append(b("<div/>").addClass("jGrowl-header").html(h.header)).append(b("<div/>").addClass("jGrowl-message").html(i)).data("jGrowl",h).addClass(h.theme).children(".jGrowl-close").bind("click.jGrowl",function(){return b(this).parent().trigger("jGrowl.beforeClose"),!1}).parent();b(g).bind("mouseover.jGrowl",function(){b(".jGrowl-notification",j.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){b(".jGrowl-notification",j.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){h.beforeOpen.apply(g,[g,i,h,j.element])!==!1&&b(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){h.open.apply(g,[g,i,h,j.element])!==!1&&("after"==h.glue?b(".jGrowl-notification:last",j.element).after(g):b(".jGrowl-notification:first",j.element).before(g),b(this).animate(h.animateOpen,h.openDuration,h.easing,function(){b.support.opacity===!1&&this.style.removeAttribute("filter"),null!==b(this).data("jGrowl")&&(b(this).data("jGrowl").created=new Date),b(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){h.afterOpen.apply(g,[g,i,h,j.element])}).bind("click",function(){h.click.apply(g,[g.message,h,j.element])}).bind("jGrowl.beforeClose",function(){h.beforeClose.apply(g,[g,i,h,j.element])!==!1&&b(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){b(this).data("jGrowl.pause",!0),b(this).animate(h.animateClose,h.closeDuration,h.easing,function(){b.isFunction(h.close)?h.close.apply(g,[g,i,h,j.element])!==!1&&b(this).remove():b(this).remove()})}).trigger("jGrowl.beforeOpen"),""!==h.corners&&void 0!==b.fn.corner&&b(g).corner(h.corners),b(".jGrowl-notification:parent",j.element).size()>1&&0===b(".jGrowl-closer",j.element).size()&&this.defaults.closer!==!1&&b(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(j.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){b(this).siblings().trigger("jGrowl.beforeClose"),b.isFunction(j.defaults.closer)&&j.defaults.closer.apply(b(this).parent()[0],[b(this).parent()[0]])})},update:function(){b(this.element).find(".jGrowl-notification:parent").each(function(){void 0!==b(this).data("jGrowl")&&void 0!==b(this).data("jGrowl").created&&b(this).data("jGrowl").created.getTime()+parseInt(b(this).data("jGrowl").life,10)<(new Date).getTime()&&b(this).data("jGrowl").sticky!==!0&&(void 0===b(this).data("jGrowl.pause")||b(this).data("jGrowl.pause")!==!0)&&b(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0===this.defaults.pool||b(this.element).find(".jGrowl-notification:parent").size()<this.defaults.pool)&&this.render(this.notifications.shift()),b(this.element).find(".jGrowl-notification:parent").size()<2&&b(this.element).find(".jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){b(this).remove()})},startup:function(a){this.element=b(a).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){b(a).data("jGrowl.instance").update()},parseInt(this.defaults.check,10))},shutdown:function(){b(this.element).removeClass("jGrowl").find(".jGrowl-notification").trigger("jGrowl.close").parent().empty(),clearInterval(this.interval)},close:function(){b(this.element).find(".jGrowl-notification").each(function(){b(this).trigger("jGrowl.beforeClose")})}}),b.jGrowl.defaults=b.fn.jGrowl.prototype.defaults}(jQuery);